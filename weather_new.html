<!DOCTYPE html>
<html>
<head>
<title>Weather Dashboard</title>
<link rel="icon" type="image/x-icon" href="https://www.spc.noaa.gov/products/outlook/day1otlk.gif"> <!--the little icon next to the browser tab-->
<style>

/*estimating the max width 290px for flip phones*/
/*@media only screen and (max-width: 290px) {*/	/*hardcoding everything for now*/
/*each otlk image equally spaced in a row*/

body {
	margin: 1px;
}

#outlook_img_row_wrapper {
	display: flex;
	justify-content: center;
	align-items: center;
}

#outlook_img_row {
	display: flex; 
	flex-direction: row;
	flex-wrap: nowrap;
	gap: 5px;
	width: 255px; /*use auto or 100% or 255px?*/
}
#outlook_img_row img {
	/*this makes the images auto resize to fit the width*/
	width:76px;
}
#outlook_img_row h5 {
	text-align: center;
	margin: 0;
}

#day4-8div {
	display: none;
}

#mainElementDiv {
	display: flex;
	justify-content: center;
	align-items: center;
}

#mainImg {
	/*margin: auto;
	display: block;*/
	margin-top: 4px;
	margin-bottom: 4px;
	width: 225px;
}

#buttonWrapper > button {
	padding-inline: 2px;
	background: #000000;
	color: #FFFFFF;
	border: 0;
	margin: 0 1px 0 1px;
	width: 238px;
}

#mainSelectWrapper {
	display: flex;
	justify-content: center;
	align-items: center;
}

#mainSelect {
	width: 12ch;
}

/* make these two invisible at first, JS will show them later*/
#selectYT {
	display: none;
	width: 9ch;
}

#selectRadar {
	display: none;
	width: 13ch;
}

iframe {
	width:225px;
	aspect-ratio: 16/9 auto;
}

/*}*/ /*for the max-width 290px*/

/*scaling it for regular smartphones*/
@media (min-width: 320px) {

#outlook_img_row {
	width: 390px;
}

#outlook_img_row img {
	width: 100;
}

#day4-8div {
	display: block;
}

#mainImg {
	width: 390px;
}

iframe {
	width: 390px;
}
	
}


/*scaling it for 1080p displays:*/
@media only screen and (min-width: 1000px) {

#outlook_img_row {
	width: 700px;
}

#outlook_img_row img {
	width: 100;
}

#day4-8div {
	display: block;
}

#mainImg {
	width: 582px;
}

iframe {
	width: 582px;
}

}


</style>
</head>
<body>

<!--<h3 style="text-align: center; margin: 5px;">SPC Outlooks:</h3>-->

<!--Header with the day1-3 outlooks-->	<!--maybe add the day4 if the screen is wide enough-->
<div id="outlook_img_row_wrapper">
<div id="outlook_img_row">
<div><h5>Day 1</h5><a><img id="day1" onclick="selectMainOutlook(this.src, this.id);" src="https://www.spc.noaa.gov/products/outlook/day1otlk.gif"/></a></div>
<div><h5>Day 2</h5><a><img id="day2" onclick="selectMainOutlook(this.src, this.id);" src="https://www.spc.noaa.gov/products/outlook/day2otlk.gif"/></a></div>
<div><h5>Day 3</h5><a><img id="day3" onclick="selectMainOutlook(this.src);" src="https://www.spc.noaa.gov/products/outlook/day3otlk.gif"/></a></div>
<div id="day4-8div"><h5>Day 4-8</h5><a><img id="day4-8" src="https://www.spc.noaa.gov/products/exper/day4-8/day48prob.gif"/></a></div>
</div>	<!--not having the images in an <a> breaks the sizing, idk why-->
</div>

<div id="buttonWrapper" style="display: flex; justify-content: center; align-items: center;">

<button value="cat" onclick="changeProbabilities(this.value);">Categorical</button>
<button value="torn" onclick="changeProbabilities(this.value);">Tornado</button>
<button value="wind" onclick="changeProbabilities(this.value);">Wind</button>
<button value="hail" onclick="changeProbabilities(this.value);">Hail</button>

</div>

<div id="mainElementDiv">
<img id="mainImg" src="https://www.spc.noaa.gov/products/activity_loop.gif">
</div>

<div id="mainSelectWrapper">
<select id="mainSelect" onchange="changeMainImg(this.value);">

	<option value="viewmore" selected>View more</option>
	<option value="overview">SPC overview</option>
	<option value="oldDay1">*wip* Yesterday's otlk valid until 12Z</button>
	<option value="days4-8">Day4-8 outlook</option>
	<option value="yt">YT streams</option>
	<option value="radar">Local radar</option>
	<option value="wxRadio">*wip* WX Radio</option>

</select>

<select id="selectYT" onchange="selectYT(this.value);">
	<option value="UCBBsPuUY-8UwkSim4zLXp1w" selected>Y'allBot</option>
	<option value="UCE5hG35cePuCb3MbxDlYRPQ">TRD Pro Storm Chasers</option>
	<option value="UC9Im8smbq_uvNrmeJrW7Xjg">Weather Tracker Plus</option>
	<option value="UCQc7Ol2itgbnMXPjZmPdRRQ">Aaron Preslin (Cinci live cam)</option>
	<option value="UCp2G_jHO53yj2NVjv8zbDmQ">Evan Fryberger</option>
	<option value="UCJHAT3Uvv-g3I8H3GhHWV7w">Ryan Hall Y'all</option>
	<option value="UCvBVK2ymNzPLRJrgip2GeQQ">Max Velocity</option>
	<option value="UChxsy558HhpaqnB1Hk6tHkw">Mr. Dibble</option>
	<option value="UCyATI09Wvf9k-I1MmNILjEQ">TRG Tornado</option>
	<option value="UCjHx6rlvmIEK8TmLnHghWLw">NWW116</option>
</select>

<select id="selectRadar" value="day" onchange="selectRadar();">

        <option value="usa">Full United States</option>
        <option value="bfl">CA - Bakersfield</option>
        <option value="bgm">NY - Binghamton</option>
        <option value="bis">ND - Bismarck</option>
        <option value="bml">NH - Berlin</option>
        <option value="bro">TX - Brownsville</option>
        <option value="bwg">KY - Bowling Green</option>
        <option value="cad">MI - Cadillac</option>
        <option value="clt">NC - Charlotte</option>
        <option value="csg">GA - Columbus</option>
        <option value="day" selected>OH - Dayton</option>
        <option value="den">CO - Denver</option>
        <option value="dsm">IA - Des Moines</option>
        <option value="eyw">FL - Key West</option>
        <option value="fcx">VA - Roanoke</option>
        <option value="hfd">CT - Hartford</option>
        <option value="jef">MO - Jefferson City</option>
        <option value="law">OK - Lawton</option>
        <option value="lbf">NE - North Platte</option>
        <option value="lit">AR - Little Rock</option>
        <option value="lwt">MT - Lewistown</option>
        <option value="msy">LA - New Orleans</option>
        <option value="myl">ID - McCall</option>
        <option value="pie">FL - Saint Petersburg</option>
        <option value="pir">SD - Pierre</option>
        <option value="prc">AZ - Prescott</option>
        <option value="pvu">UT - Provo</option>
        <option value="rdm">OR - Redmond</option>
        <option value="riw">WY - Riverton</option>
        <option value="rno">NV - Reno</option>
        <option value="row">NM - Roswell</option>
        <option value="sat">TX - San Antonio</option>
        <option value="shd">VA - Staunton</option>
        <option value="sln">KS - Salina</option>
        <option value="spi">IL - Springfield</option>
        <option value="stc">MN - Saint Cloud</option>
        <option value="tiw">WA - Tacoma</option>
        <option value="tvr">MS - Vicksburg</option>
</select>

</div>

<br>
<br>
<p style="display: flex; justify-content: center; align-items: center;">*deployed from branch weather for testing</p>

</body>

<script>

var mainElementDiv = document.getElementById("mainElementDiv");

function selectMainOutlook(selectedSrc, selectedID) {

	console.log("function selectMainOutlook");
	mainElementDiv.innerHTML = '<img id="mainImg" alt="' + selectedID + '" src="' + selectedSrc + '">';
	console.log(document.getElementById("mainImg").alt);
	document.getElementById("mainSelect").value="viewmore";
	document.getElementById("selectYT").style.display="none";
	document.getElementById("selectRadar").style.display="none";
}

function changeProbabilities(selection) {
	console.log("changeProbabilities: selected " + selection);
	day1 = document.getElementById("day1");
	day2 = document.getElementById("day2");
	//change the day1 and day2 outlooks at the top of the screen
	if (selection == "cat") {
		day1.src="https://www.spc.noaa.gov/products/outlook/day1otlk.gif";
		day2.src="https://www.spc.noaa.gov/products/outlook/day2otlk.gif";	

	}

	else {
		day1.src="https://www.spc.noaa.gov/products/outlook/day1probotlk_" + selection + ".gif";
		day2.src="https://www.spc.noaa.gov/products/outlook/day2probotlk_" + selection + ".gif";
	}

	//if the main image is one of the outlooks, change that
	otlk = document.getElementById("mainImg").alt;
	if (["day1", "day2"].includes(otlk)) {
		console.log("includes");
		mainImg.src = document.getElementById(otlk).src;
	}
}

function changeMainImg(selectedValue) 

{
	console.log(selectedValue);

	//check YT and radar first with their own else bc if they aren't true i need to hide the select for them
	if (selectedValue == "yt") {
		mainElementDiv.innerHTML = "<iframe src='https://www.youtube.com/embed/live_stream?channel=UCBBsPuUY-8UwkSim4zLXp1w' allow='picture-in-picture; fullscreen;'></iframe>";
		document.getElementById("selectYT").style.display="block";
	}
	else {
		document.getElementById("selectYT").style.display="none";
	}
	if (selectedValue == "radar") {
		mainElementDiv.innerHTML = '<img id="mainImg" src="https://s.w-x.co/staticmaps/wu/wxtype/county_loc/day/animate.png">';
		document.getElementById("selectRadar").style.display="block";
	}

	else {
		document.getElementById("selectRadar").style.display="none";
	}

	if (selectedValue == "overview") {
		mainElementDiv.innerHTML = '<img id="mainImg" src="https://www.spc.noaa.gov/products/activity_loop.gif">';
	}
	else if (selectedValue == "days4-8") {
		mainElementDiv.innerHTML = '<img id="mainImg" src="https://www.spc.noaa.gov/products/exper/day4-8/day48prob.gif">';
	}
}

function selectYT(channelID) {
	mainElementDiv.innerHTML = "<iframe src='https://www.youtube.com/embed/live_stream?channel=" + channelID + "' allow='picture-in-picture; fullscreen;'></iframe>";

}

function selectRadar() {
	var selectedLocation = document.getElementById("selectRadar").value;
	mainImg = document.getElementById("mainImg");
	if (selectedLocation == "usa") {
		mainImg.src = "https://s.w-x.co/staticmaps/wu/wxtype/none/usa/animate.png"
	}
	else {
		mainImg.src = "https://s.w-x.co/staticmaps/wu/wxtype/county_loc/" + selectedLocation + "/animate.png"
	}
}

</script>
</html>
